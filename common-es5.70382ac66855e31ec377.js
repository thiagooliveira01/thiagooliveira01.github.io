(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"1Vyx":function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var o=r("gIcY"),i=r("ZYCi"),n=r("15JJ"),s=r("hUol"),u=r.n(s),c=function(){function t(t,e,r,n){this.injector=t,this.resource=e,this.resourceService=r,this.jsonDataToResourceFn=n,this.serverErrorMessages=null,this.submittingForm=!1,this.route=this.injector.get(i.a),this.router=this.injector.get(i.k),this.formBuilder=this.injector.get(o.FormBuilder)}return t.prototype.ngOnInit=function(){this.setCurrentAction(),this.buildResourceForm(),this.loadResource()},t.prototype.ngAfterContentChecked=function(){this.setPageTitle()},t.prototype.submitForm=function(){this.submittingForm=!0,"new"==this.currentAction?this.createResource():this.updateResource()},t.prototype.setCurrentAction=function(){this.currentAction="new"==this.route.snapshot.url[0].path?"new":"edit"},t.prototype.buildResource=function(){},t.prototype.loadResource=function(){var t=this;"edit"==this.currentAction&&this.route.paramMap.pipe(Object(n.a)((function(e){return t.resourceService.getById(+e.get("id"))}))).subscribe((function(e){t.resource=e,t.resourceForm.patchValue(e)}),(function(t){return alert("Ocorreu um erro no servidor.")}))},t.prototype.setPageTitle=function(){this.pageTitle="new"==this.currentAction?this.creationPageTitle():this.editionPageTitle()},t.prototype.creationPageTitle=function(){return"Novo"},t.prototype.editionPageTitle=function(){return"Edi\xe7\xe3o"},t.prototype.createResource=function(){var t=this,e=this.jsonDataToResourceFn(this.resourceForm.value);this.resourceService.create(e).subscribe((function(e){return t.actionsForSuccess(e)}),(function(e){return t.actionsForError(e)}))},t.prototype.updateResource=function(){var t=this,e=this.jsonDataToResourceFn(this.resourceForm.value);this.resourceService.update(e).subscribe((function(e){return t.actionsForSuccess(e)}),(function(e){return t.actionsForError(e)}))},t.prototype.actionsForSuccess=function(t){var e=this;u.a.success("Solicita\xe7\xe3o processada com sucesso!");var r=this.route.snapshot.parent.url[0].path;this.router.navigateByUrl(r,{skipLocationChange:!0}).then((function(){return e.router.navigate([r,t.id,"edit"])}))},t.prototype.actionsForError=function(t){u.a.error("Ocorreu um erro ao processar a sua solicita\xe7\xe3o!"),this.submittingForm=!1,this.serverErrorMessages=422===t.status?JSON.parse(t._body).errors:["Falha na comunica\xe7\xe3o com o servidor. Tente mais tarde."]},t}()},"1iWG":function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var o=function(){function t(t){this.resourceService=t,this.resources=[]}return t.prototype.ngOnInit=function(){var t=this;this.resourceService.getall().subscribe((function(e){return t.resources=e.sort((function(t,e){return e.id-t.id}))}),(function(t){return alert("Erro ao carregar a lista")}))},t.prototype.deleteResource=function(t){var e=this;confirm("Deseja realmente excluir este item?")&&this.resourceService.delete(t.id).subscribe((function(){return e.resources=e.resources.filter((function(e){return e!=t}))}),(function(){return alert("Erro ao tentar excluir")}))},t}()}}]);